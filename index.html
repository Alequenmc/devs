<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Actualizado: Se añadió maximum-scale=1 y user-scalable=no para prevenir el zoom -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Comunidad DEVS - Grupos de WhatsApp</title>
    <!-- Cargar Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Importar Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Link a Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Estilo base con el fondo solicitado */
        body {
            background-color: #141414; /* Color de fondo */
            font-family: 'Montserrat', sans-serif; /* Fuente principal actualizada */
            color: #e5e7eb; /* text-gray-200 */
            /* CORRECCIÓN: Se añade overflow: hidden para evitar el scroll en el body */
            overflow: hidden;
        }
        
        /* Estilo para el logo */
        .logo {
            font-family: 'Anton', sans-serif;
            letter-spacing: 1.5px;
        }
        
        /* Estilo para las tarjetas con borde sólido */
        .card-border {
            border: 1px solid #262626; /* border-neutral-800 */
            background-color: #171717; /* bg-neutral-900 */
            transition: all 0.3s ease;
        }
        
        .card-border:hover {
            transform: translateY(-4px) scale(1.02);
            border-color: #404040; /* border-neutral-700 */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        
        /* Estilo para los botones de navegación (Tabs) */
        .nav-tab {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        
        .nav-tab.active {
            background-color: #262626; /* bg-neutral-800 */
            color: #ffffff;
        }
        
        .nav-tab:not(.active):hover {
            background-color: #1a1a1a;
        }
        
        /* Ocultar contenido inactivo */
        .content-section.hidden {
            display: none;
        }

        /* Estilo para los iconos sociales del header */
        .header-social-icon {
            font-size: 1.25rem; /* 20px */
            color: #a3a3a3; /* text-neutral-400 */
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .header-social-icon:hover {
            color: #ffffff; /* text-white */
            transform: scale(1.1);
        }
    </style>
</head>
<!-- CORRECCIÓN: Añadido 'overflow-hidden' para prevenir el scroll principal -->
<body class="min-h-screen overflow-hidden">

    <!-- 
      CORRECCIÓN (Nueva Estructura):
      Este es el ÚNICO contenedor.
      Es fijo, llena la pantalla y gestiona el scroll.
      El body (arriba) tiene overflow-hidden.
    -->
    <div class="fixed top-0 left-0 right-0 bottom-0 overflow-y-auto z-40">

        <!-- 
          Encabezado (AHORA DENTRO del div de scroll)
          - Cambiado de 'fixed' a 'sticky' para que se pegue arriba DENTRO de este div.
          - 'top-0' para que se pegue en la parte superior.
          - 'z-50' para que esté sobre el contenido de 'main'.
        -->
        <header class="sticky top-0 left-0 right-0 bg-gradient-to-b from-[#141414] to-transparent z-50" style="height: 4.5rem;"> <!-- Altura fija para calc() -->
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center h-full">
                <!-- Logo -->
                <a href="#" class="logo text-4xl text-white">DEVS</a>
                
                <!-- Iconos Sociales -->
                <div class="flex space-x-5 items-center">
                    <!-- Reemplaza '#' con tus enlaces reales -->
                    <a href="https://whatsapp.com/channel/0029VaDgLlM2kNFqDttPUZ1E" target="_blank" rel="noopener noreferrer" title="WhatsApp">
                        <i class="fa-brands fa-whatsapp header-social-icon"></i>
                    </a>
                    <a href="https://www.facebook.com/profile.php?id=61574892055228" target="_blank" rel="noopener noreferrer" title="Facebook">
                        <i class="fa-brands fa-facebook header-social-icon"></i>
                    </a>
                    <a href="https://www.youtube.com/@devs-latam" target="_blank" rel="noopener noreferrer" title="YouTube">
                        <i class="fa-brands fa-youtube header-social-icon"></i>
                    </a>
                </div>
            </nav>
        </header>

        <!-- 
          Contenido Principal 
          - AHORA DENTRO del div de scroll.
          - Añadido '-mt-[4.5rem]' para jalar el contenido hacia arriba 
            y que se deslice DETRÁS del header 'sticky'.
        -->
        <main class="-mt-[4.5rem]">
        
            <!-- SECCIÓN: Presentación y Estadísticas -->
            <!-- Esta sección ahora comienza desde el top-0 real (detrás del header) -->
            <section class="min-h-[100dvh] flex flex-col justify-end pb-20 relative overflow-hidden">
                
                <!-- Fondo de GIF (z-0) -->
                <div class="absolute inset-0 w-full h-full z-0">
                    <img src="main.gif" alt="Fondo animado" class="w-full h-full object-cover opacity-20">
                </div>
                
                <!-- Gradiente inferior (z-10) -->
                <div class="absolute bottom-0 left-0 right-0 h-48 bg-gradient-to-t from-[#141414] to-transparent z-10"></div>
    
                <!-- Contenido de la presentación (z-20) -->
                <!-- Actualizado: El padding y container están AQUÍ DENTRO -->
                <div class="container mx-auto px-6 relative z-20">
                    <!-- Actualizado: Eliminado el grid y el SVG. Contenido envuelto en max-w-2xl -->
                    <div class="max-w-2xl">
                        
                        <!-- Columna 1: Texto (Alineado a la izquierda) -->
                        <div class="text-left"> <!-- Alineado a la izquierda por defecto -->
                            <!-- Título (más pequeño en móvil) -->
                            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6">
                                Bienvenido a la<br>Comunidad <span class="text-blue-500">DEVS</span>
                            </h1>
                            <!-- Descripción -->
                            <p class="text-lg text-gray-300 max-w-lg mb-8">
                                El punto de encuentro para desarrolladores, programadores y entusiastas de la tecnología. Conecta, aprende y construye el futuro.
                            </p>
                            
                            <!-- Estadísticas -->
                            <div class="flex space-x-6">
                                <div>
                                    <p id="totalGrupos" class="text-3xl font-bold text-white">...</p>
                                    <p class="text-sm text-gray-400">Grupos</p>
                                </div>
                                <div>
                                    <p id="totalMiembros" class="text-3xl font-bold text-white">...</p>
                                    <p class="text-sm text-gray-400">Administradores</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Columna 2: Gráfico SVG (ELIMINADO) -->
                    </div>
                </div>
            </section>
    
            <!-- Contenedor para el resto del contenido (con márgenes y padding) -->
            <div class="container mx-auto px-6">
            
                <!-- Navegación SPA (Tabs) -->
                <div class="flex justify-center my-12">
                    <div class="flex space-x-2 border border-neutral-700 p-1 rounded-lg">
                        <button id="tab-grupos" class="nav-tab active">Grupos</button>
                        <button id="tab-admins" class="nav-tab">Admins</button>
                    </div>
                </div>
        
                <!-- Sección de Grupos (visible por defecto) -->
                <section id="content-grupos" class="content-section">
                    <div class="text-center mb-10">
                        <h2 class="text-4xl font-bold text-white mb-4">Grupos de la Comunidad</h2>
                        <p class="text-lg text-gray-400">Explora y únete a nuestros grupos de WhatsApp para conectar y aprender.</p>
                    </div>
                    
                    <!-- Contenedor de la cuadrícula de grupos -->
                    <div id="grupos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Las tarjetas de grupo se insertarán aquí por JS -->
                        <p class="text-gray-400 col-span-full text-center">Cargando grupos...</p>
                    </div>
                </section>
                
                <!-- Sección de Administradores (oculta por defecto) -->
                <section id="content-admins" class="content-section hidden">
                    <div class="text-center mb-10">
                        <h2 class="text-4xl font-bold text-white mb-4">Administradores</h2>
                        <p class="text-lg text-gray-400">El equipo que mantiene viva y ordenada a la comunidad.</p>
                    </div>
                    
                    <!-- Contenedor de la cuadrícula de admins -->
                    <div id="admins-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Las tarjetas de admin se insertarán aquí por JS -->
                    </div>
                </section>
            </div> <!-- Fin del container para el contenido principal -->
    
        </main>
    
        <!-- 
          Footer 
          - AHORA DENTRO del div de scroll.
        -->
        <footer class="container mx-auto px-6 py-8 mt-16 border-t border-neutral-800">
            <p class="text-center text-gray-500">&copy; 2025 Comunidad DEVS. Todos los derechos reservados.</p>
        </footer>

    </div> <!-- FIN DEL CONTENEDOR DE SCROLL ÚNICO -->


    <!-- Plantillas de Tarjetas (para clonar con JS) -->
    <template id="grupo-card-template">
        <a href="#" target="_blank" rel="noopener noreferrer" class="grupo-card-link block h-full">
            <div class="card-border p-6 rounded-xl h-full flex flex-col">
                <div class="flex items-center mb-4">
                    <img src="" alt="" class="grupo-imagen w-12 h-12 rounded-lg object-cover mr-4">
                    <h3 class="grupo-titulo text-xl font-bold text-white"></h3>
                </div>
                <p class="grupo-descripcion text-gray-400 text-sm flex-grow"></p>
                <div class="mt-5">
                    <span class="inline-block bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Unirse al grupo &rarr;
                    </span>
                </div>
            </div>
        </a>
    </template>
    
    <template id="admin-card-template">
        <!-- Nuevo diseño de tarjeta de Admin -->
        <div class="card-border rounded-xl overflow-hidden h-full flex flex-col">
            <!-- Imagen de fondo (Ahora usa el 'banner' del JSON) -->
            <div class="admin-banner h-24 bg-cover bg-center relative" style="background-image: url('img/default_banner.png');">
                <!-- Overlay oscuro -->
                <div class="absolute inset-0 bg-black opacity-40"></div>
                <!-- Foto de perfil -->
                <img src="img/default_profile.png" alt="Foto de perfil" class="admin-foto absolute bottom-0 left-6 w-20 h-20 rounded-full border-4 border-[#171717] transform translate-y-1/2">
            </div>
            
            <!-- Contenido de la tarjeta -->
            <div class="pt-14 p-6 flex flex-col flex-grow">
                <!-- Nombre y Descripción -->
                <h3 class="admin-nombre text-2xl font-bold text-white"></h3>
                <p class="admin-desc text-blue-400 text-sm mb-4"></p>
                
                <!-- Grupos que administra -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Administra</h4>
                    <div class="admin-grupos flex flex-wrap gap-2">
                        <!-- Tags de grupos se insertan aquí -->
                    </div>
                </div>
                
                <!-- Links Sociales (al final) -->
                <div class="admin-links mt-auto pt-4 flex space-x-4">
                    <!-- Iconos sociales se insertan aquí -->
                </div>
            </div>
        </div>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Lógica de Pestañas (Tabs) ---
            const tabGrupos = document.getElementById('tab-grupos');
            const tabAdmins = document.getElementById('tab-admins');
            const contentGrupos = document.getElementById('content-grupos');
            const contentAdmins = document.getElementById('content-admins');
            
            if (tabGrupos && tabAdmins && contentGrupos && contentAdmins) {
                tabGrupos.addEventListener('click', () => {
                    tabGrupos.classList.add('active');
                    tabAdmins.classList.remove('active');
                    contentGrupos.classList.remove('hidden');
                    contentAdmins.classList.add('hidden');
                });
                
                tabAdmins.addEventListener('click', () => {
                    tabAdmins.classList.add('active');
                    tabGrupos.classList.remove('active');
                    contentAdmins.classList.remove('hidden');
                    contentGrupos.classList.add('hidden');
                });
            }

            // --- Cargar Datos y Renderizar ---
            const totalMiembrosEl = document.getElementById('totalMiembros');
            const totalGruposEl = document.getElementById('totalGrupos');
            const gruposGridEl = document.getElementById('grupos-grid');
            const adminsGridEl = document.getElementById('admins-grid');

            // Cargar Grupos
            fetch('grupos.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar grupos.json');
                    return response.json();
                })
                .then(gruposData => {
                    if (totalGruposEl) totalGruposEl.textContent = gruposData.length;
                    renderizarGrupos(gruposData, gruposGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar grupos:', error);
                    if (gruposGridEl) gruposGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los grupos.</p>';
                    if (totalGruposEl) totalGruposEl.textContent = '0';
                });

            // Cargar Admins y Miembros Totales
            fetch('admins.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar admins.json');
                    return response.json();
                })
                .then(adminsData => {
                    // Sumar miembros (placeholder, ajusta 'miembros' si existe en tu JSON)
                    // Por ahora, solo contamos admins como miembros para el ejemplo
                    if (totalMiembrosEl) totalMiembrosEl.textContent = adminsData.length; // Ajusta esta lógica si tienes un total
                    renderizarAdmins(adminsData, adminsGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar admins:', error);
                    if (adminsGridEl) adminsGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los admins.</p>';
                    if (totalMiembrosEl) totalMiembrosEl.textContent = '0';
                });
            
            // --- Funciones de Renderizado ---

            function renderizarGrupos(gruposData, container) {
                if (!container) return;
                const grupoTemplate = document.getElementById('grupo-card-template');
                container.innerHTML = ''; // Limpiar "Cargando..."

                gruposData.forEach(grupo => {
                    const card = grupoTemplate.content.cloneNode(true);
                    
                    card.querySelector('.grupo-card-link').href = grupo.link;
                    const imgEl = card.querySelector('.grupo-imagen');
                    imgEl.src = grupo.imagen || 'img/default_group.png'; // Fallback
                    imgEl.alt = `Logo de ${grupo.titulo}`;
                    
                    card.querySelector('.grupo-titulo').textContent = grupo.titulo;
                    card.querySelector('.grupo-descripcion').textContent = grupo.descripcion;
                    
                    container.appendChild(card);
                });
            }
            
            function renderizarAdmins(adminsData, container) {
                if (!container) return;
                const adminTemplate = document.getElementById('admin-card-template');
                container.innerHTML = '';
                
                adminsData.forEach(admin => {
                    const card = adminTemplate.content.cloneNode(true);
                    
                    const fotoSrc = admin.foto || 'img/default_profile.png';
                    
                    // Fondo de la tarjeta (imagen de perfil borrosa)
                    const bgEl = card.querySelector('.admin-banner');
                    // Actualizado: Usar el banner del JSON, o la foto de perfil como fallback
                    const bannerSrc = admin.banner || fotoSrc; 
                    bgEl.style.backgroundImage = `url('${bannerSrc}')`;
                    
                    // Foto de perfil principal
                    const fotoEl = card.querySelector('.admin-foto');
                    fotoEl.src = fotoSrc;
                    fotoEl.alt = `Foto de ${admin.nombre}`;
                    
                    card.querySelector('.admin-nombre').textContent = admin.nombre;
                    card.querySelector('.admin-desc').textContent = admin.descripcion;
                    
                    // Grupos que administra
                    const gruposContainer = card.querySelector('.admin-grupos');
                    admin.grupos.forEach(nombreGrupo => {
                        const tag = document.createElement('span');
                        tag.className = "px-2 py-0.5 bg-neutral-800 text-blue-300 text-xs font-medium rounded-full";
                        tag.textContent = nombreGrupo;
                        gruposContainer.appendChild(tag);
                    });
                    
                    // Links Sociales
                    const linksContainer = card.querySelector('.admin-links');
                    admin.links.forEach(link => {
                        const a = document.createElement('a');
                        a.href = link.url;
                        a.target = "_blank";
                        a.rel = "noopener noreferrer";
                        a.className = "text-gray-400 hover:text-white transition-colors";
                        
                        let iconClass = '';
                        if (link.tipo === 'github') iconClass = 'fa-brands fa-github';
                        else if (link.tipo === 'linkedin') iconClass = 'fa-brands fa-linkedin';
                        else iconClass = 'fa-solid fa-link'; // Icono genérico
                        
                        a.innerHTML = `<i class="${iconClass} text-2xl"></i>`;
                        linksContainer.appendChild(a);
                    });
                    
                    container.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>
