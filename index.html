<!DOCTYPE html>
<html lang="es" style="scroll-behavior: smooth;"> <!-- Añadido scroll-behavior aquí -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Comunidad DEVS - Grupos de WhatsApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Estilo base */
        body {
            background-color: #141414;
            font-family: 'Montserrat', sans-serif;
            color: #e5e7eb;
        }
        
        /* Estilo para el logo */
        .logo {
            font-family: 'Anton', sans-serif;
            letter-spacing: 1.5px;
        }
        
        /* Estilo para las tarjetas */
        .card-border {
            border: 1px solid #262626;
            background-color: #171717;
            transition: all 0.3s ease;
        }
        
        .card-border:hover {
            transform: translateY(-4px) scale(1.02);
            border-color: #404040;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        
        /* Estilo para los botones de navegación (Tabs) */
        .nav-tab {
            padding: 8px 20px; /* Ajustado para píldora */
            border-radius: 9999px; /* rounded-full */
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            
            /* --- MODIFICACIÓN --- */
            /* Fondo y color base para botones INACTIVOS */
            background-color: #1a1a1a; /* bg-neutral-900 */
            color: #a3a3a3; /* text-neutral-400 */
            /* --- FIN MODIFICACIÓN --- */
            
            border: 1px solid transparent;
            white-space: nowrap; /* Evita que el texto se parta */
        }
        
        .nav-tab.active {
            background-color: #262626;
            color: #ffffff;
        }
        
        .nav-tab:not(.active):hover {
            /* --- MODIFICACIÓN --- */
            /* Al pasar el mouse, se ve igual que el activo */
            background-color: #262626;
            color: #ffffff;
            /* --- FIN MODIFICACIÓN --- */
        }
        
        /* Ocultar contenido inactivo */
        .content-section.hidden {
            display: none;
        }

        /* Estilos del Header */
        header {
            transition: background-color 0.3s ease, border-color 0.3s ease;
            height: 4.5rem; /* Altura fija */
            background-color: #141414;
        }
        
        /* Iconos sociales del header */
        .header-social-icon {
            font-size: 1.25rem; /* 20px */
            color: #a3a3a3;
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .header-social-icon:hover {
            color: #ffffff;
            transform: scale(1.1);
        }

        /* Ocultar scrollbar en el wrapper de los tabs */
        #nav-tabs-wrapper::-webkit-scrollbar {
            display: none; /* Safari and Chrome */
        }
        #nav-tabs-wrapper {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

    </style>
</head>
<body class="min-h-screen">

    <!-- Encabezado (Se scrollea con la página) -->
    <header id="main-header">
        <div class="container mx-auto px-6 h-full">
            <div class="flex-grow flex justify-between items-center h-full relative">
                <!-- Logo -->
                <a href="#" class="logo text-4xl text-white">DEVS</a>
                
                <!-- Iconos Sociales (Original) -->
                <div id="header-social-icons" class="flex space-x-5 items-center">
                    <a href="https://whatsapp.com/channel/0029VaDgLlM2kNFqDttPUZ1E" target="_blank" rel="noopener noreferrer" title="WhatsApp">
                        <i class="fa-brands fa-whatsapp header-social-icon"></i>
                    </a>
                    <a href="https://www.facebook.com/profile.php?id=61574892055228" target="_blank" rel="noopener noreferrer" title="Facebook">
                        <i class="fa-brands fa-facebook header-social-icon"></i>
                    </a>
                    <a href="https://www.youtube.com/@devs-latam" target="_blank" rel="noopener noreferrer" title="YouTube">
                        <i class="fa-brands fa-youtube header-social-icon"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main>
    
        <!-- 
            Navegación SPA (Tabs) - Contenedor Wrapper 
            - Ocupa el ancho completo de la pantalla (fuera del container).
            - 'sticky top-0' lo pega al borde superior de la pantalla al hacer scroll.
            - 'overflow-x-auto' permite scroll horizontal.
            - 'px-6' alinea los botones con el contenido.
        -->
        <!-- MODIFICADO: Se añadió 'py-2' para un padding vertical ligero -->
        <div id="nav-tabs-wrapper" class="transition-all duration-300 sticky top-0 z-40 bg-[#141414] overflow-x-auto px-6 py-2">
            <!-- Contenedor de los botones - SIN BORDE -->
            <div id="nav-tabs-container" class="p-1 rounded-lg bg-[#141414] inline-flex space-x-2">
                <button id="tab-grupos" class="nav-tab active">Grupos</button>
                <button id="tab-admins" class="nav-tab">Admins</button>
                <button id="tab-recursos" class="nav-tab">Recursos</button>
                <button id="tab-eventos" class="nav-tab">Eventos</button>
            </div>
        </div>

        <!-- Contenedor para el contenido (con márgenes y padding) -->
        <div class="container mx-auto px-6">
        
            <!-- Sección de Grupos (visible por defecto) -->
            <section id="content-grupos" class="content-section pt-8">
                <!-- MODIFICADO: text-left en móvil, md:text-center -->
                <div class="text-left md:text-center mb-10">
                    <!-- MODIFICADO: text-3xl, md:text-4xl, font-semibold -->
                    <h2 class="text-3xl md:text-4xl font-semibold text-white mb-4">Grupos de la Comunidad</h2>
                    <!-- MODIFICADO: text-base, md:text-lg -->
                    <p class="text-base md:text-lg text-gray-400">Explora y únete a nuestros grupos de WhatsApp para conectar y aprender.</p>
                </div>
                <div id="grupos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <p class="text-gray-400 col-span-full text-center">Cargando grupos...</p>
                </div>
            </section>
            
            <!-- Sección de Administradores (oculta por defecto) -->
            <section id="content-admins" class="content-section hidden pt-8">
                <!-- MODIFICADO: text-left en móvil, md:text-center -->
                <div class="text-left md:text-center mb-10">
                    <!-- MODIFICADO: text-3xl, md:text-4xl, font-semibold -->
                    <h2 class="text-3xl md:text-4xl font-semibold text-white mb-4">Administradores</h2>
                    <!-- MODIFICADO: text-base, md:text-lg -->
                    <p class="text-base md:text-lg text-gray-400">El equipo que mantiene viva y ordenada a la comunidad.</p>
                </div>
                <div id="admins-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Las tarjetas de admin se insertarán aquí por JS -->
                </div>
            </section>

            <!-- Sección de Recursos (oculta por defecto) -->
            <section id="content-recursos" class="content-section hidden pt-8">
                <!-- MODIFICADO: text-left en móvil, md:text-center -->
                <div class="text-left md:text-center mb-10">
                    <!-- MODIFICADO: text-3xl, md:text-4xl, font-semibold -->
                    <h2 class="text-3xl md:text-4xl font-semibold text-white mb-4">Recursos de la Comunidad</h2>
                    <!-- MODIFICADO: text-base, md:text-lg -->
                    <p class="text-base md:text-lg text-gray-400">Carpetas de Drive con material de estudio, cursos y herramientas.</p>
                </div>
                <div id="recursos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <p class="text-gray-400 col-span-full text-center">Cargando recursos...</p>
                </div>
            </section>

            <!-- Sección de Eventos (oculta por defecto) -->
            <section id="content-eventos" class="content-section hidden pt-8">
                <!-- MODIFICADO: text-left en móvil, md:text-center -->
                <div class="text-left md:text-center mb-10">
                    <!-- MODIFICADO: text-3xl, md:text-4xl, font-semibold -->
                    <h2 class="text-3xl md:text-4xl font-semibold text-white mb-4">Próximos Eventos</h2>
                    <!-- MODIFICADO: text-base, md:text-lg -->
                    <p class="text-base md:text-lg text-gray-400">¡Participa! Workshops, charlas y hackathons de la comunidad.</p>
                </div>
                <div id="eventos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <p class="text-gray-400 col-span-full text-center">Cargando eventos...</p>
                </div>
            </section>

        </div> <!-- Fin del container para el contenido principal -->

    </main>

    <!-- Footer -->
    <footer class="container mx-auto px-6 py-8 mt-16 border-t border-neutral-800">
        <p class="text-center text-gray-500">&copy; 2025 Comunidad DEVS. Todos los derechos reservados.</p>
    </footer>

    <!-- Plantillas de Tarjetas (para clonar con JS) -->
    <template id="grupo-card-template">
        <a href="#" target="_blank" rel="noopener noreferrer" class="grupo-card-link block h-full">
            <div class="card-border p-6 rounded-xl h-full flex flex-col">
                <div class="flex items-center mb-4">
                    <img src="" alt="" class="grupo-imagen w-12 h-12 rounded-lg object-cover mr-4">
                    <h3 class="grupo-titulo text-xl font-bold text-white"></h3>
                </div>
                <p class="grupo-descripcion text-gray-400 text-sm flex-grow"></p>
                <div class="mt-5">
                    <span class="inline-block bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Unirse al grupo &rarr;
                    </span>
                </div>
            </div>
        </a>
    </template>
    
    <template id="admin-card-template">
        <div class="card-border rounded-xl overflow-hidden h-full flex flex-col">
            <div class="admin-banner h-24 bg-cover bg-center relative" style="background-image: url('img/default_banner.png');">
                <div class="absolute inset-0 bg-black opacity-40"></div>
                <img src="img/default_profile.png" alt="Foto de perfil" class="admin-foto absolute bottom-0 left-6 w-20 h-20 rounded-full border-4 border-[#171717] transform translate-y-1/2">
            </div>
            <div class="pt-14 p-6 flex flex-col flex-grow">
                <h3 class="admin-nombre text-2xl font-bold text-white"></h3>
                <p class="admin-desc text-blue-400 text-sm mb-4"></p>
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Administra</h4>
                    <div class="admin-grupos flex flex-wrap gap-2">
                        <!-- Tags de grupos se insertan aquí -->
                    </div>
                </div>
                <div class="admin-links mt-auto pt-4 flex space-x-4">
                    <!-- Iconos sociales se insertan aquí -->
                </div>
            </div>
        </div>
    </template>

    <template id="recurso-card-template">
        <a href="#" target="_blank" rel="noopener noreferrer" class="recurso-card-link block h-full">
            <div class="card-border p-6 rounded-xl h-full flex flex-col">
                <div class="flex items-center mb-4">
                    <!-- Icono actualizado de Font Awesome para Google Drive -->
                    <i class="fa-brands fa-google-drive text-4xl text-blue-400 w-12 h-12 text-center pt-1"></i>
                    <h3 class="recurso-titulo text-xl font-bold text-white ml-4"></h3>
                </div>
                <p class="recurso-descripcion text-gray-400 text-sm flex-grow"></p>
                <div class="mt-5">
                    <span class="inline-block bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                        Ir a Drive &rarr;
                    </span>
                </div>
            </div>
        </a>
    </template>

    <template id="evento-card-template">
        <a href="#" target="_blank" rel="noopener noreferrer" class="evento-card-link block h-full">
            <div class="card-border rounded-xl overflow-hidden h-full flex flex-col">
                <!-- Imagen -->
                <img src="" alt="" class="evento-imagen w-full h-48 object-cover">
                
                <!-- Contenido -->
                <div class="p-5 flex flex-col flex-grow">
                    <!-- Fecha y Hora -->
                    <p class="evento-fecha text-blue-400 text-sm font-medium mb-2"></p>
                    <!-- Título -->
                    <h3 class="evento-titulo text-xl font-bold text-white mb-3"></h3>
                    <!-- Descripción -->
                    <p class="evento-descripcion text-gray-400 text-sm flex-grow"></p>
                    <!-- Botón (al final) -->
                    <div class="mt-5">
                        <span class="inline-block bg-blue-600 text-white text-sm font-medium px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                            Más información &rarr;
                        </span>
                    </div>
                </div>
            </div>
        </a>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Lógica de Pestañas (Tabs) ---
            const tabGrupos = document.getElementById('tab-grupos');
            const tabAdmins = document.getElementById('tab-admins');
            const tabRecursos = document.getElementById('tab-recursos');
            const tabEventos = document.getElementById('tab-eventos');
            
            const contentGrupos = document.getElementById('content-grupos');
            const contentAdmins = document.getElementById('content-admins');
            const contentRecursos = document.getElementById('content-recursos');
            const contentEventos = document.getElementById('content-eventos');

            // --- Lógica de Scroll Suave ---
            const navTabsWrapper = document.getElementById('nav-tabs-wrapper');

            // Función para hacer scroll a la sección correcta
            const scrollToGrid = (gridElement) => {
                if (!gridElement || !navTabsWrapper) return;
                
                const tabsHeight = navTabsWrapper.offsetHeight;
                const stickyTopHeight = tabsHeight; // Solo es la altura de los tabs

                const gridTop = gridElement.getBoundingClientRect().top + window.scrollY;
                
                window.scrollTo({
                    /* MODIFICADO: Se eliminó el '- 20' extra */
                    top: gridTop - stickyTopHeight,
                    behavior: 'smooth'
                });
            };
            
            if (tabGrupos && tabAdmins && tabRecursos && tabEventos && contentGrupos && contentAdmins && contentRecursos && contentEventos) {
                
                tabGrupos.addEventListener('click', () => {
                    tabGrupos.classList.add('active');
                    tabAdmins.classList.remove('active');
                    tabRecursos.classList.remove('active');
                    tabEventos.classList.remove('active');
                    
                    contentGrupos.classList.remove('hidden');
                    contentAdmins.classList.add('hidden');
                    contentRecursos.classList.add('hidden');
                    contentEventos.classList.add('hidden');
                    scrollToGrid(contentGrupos);
                });
                
                tabAdmins.addEventListener('click', () => {
                    tabAdmins.classList.add('active');
                    tabGrupos.classList.remove('active');
                    tabRecursos.classList.remove('active');
                    tabEventos.classList.remove('active');

                    contentAdmins.classList.remove('hidden');
                    contentGrupos.classList.add('hidden');
                    contentRecursos.classList.add('hidden');
                    contentEventos.classList.add('hidden');
                    scrollToGrid(contentAdmins);
                });

                tabRecursos.addEventListener('click', () => {
                    tabRecursos.classList.add('active');
                    tabGrupos.classList.remove('active');
                    tabAdmins.classList.remove('active');
                    tabEventos.classList.remove('active');

                    contentRecursos.classList.remove('hidden');
                    contentGrupos.classList.add('hidden');
                    contentAdmins.classList.add('hidden');
                    contentEventos.classList.add('hidden');
                    scrollToGrid(contentRecursos);
                });

                tabEventos.addEventListener('click', () => {
                    tabEventos.classList.add('active');
                    tabGrupos.classList.remove('active');
                    tabAdmins.classList.remove('active');
                    tabRecursos.classList.remove('active');

                    contentEventos.classList.remove('hidden');
                    contentGrupos.classList.add('hidden');
                    contentAdmins.classList.add('hidden');
                    contentRecursos.classList.add('hidden');
                    scrollToGrid(contentEventos);
                });
            }

            // --- Cargar Datos y Renderizar ---
            const gruposGridEl = document.getElementById('grupos-grid');
            const adminsGridEl = document.getElementById('admins-grid');
            const recursosGridEl = document.getElementById('recursos-grid');
            const eventosGridEl = document.getElementById('eventos-grid');

            // Cargar Grupos
            fetch('grupos.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar grupos.json');
                    return response.json();
                })
                .then(gruposData => {
                    renderizarGrupos(gruposData, gruposGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar grupos:', error);
                    if (gruposGridEl) gruposGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los grupos.</p>';
                });

            // Cargar Admins
            fetch('admins.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar admins.json');
                    return response.json();
                })
                .then(adminsData => {
                    renderizarAdmins(adminsData, adminsGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar admins:', error);
                    if (adminsGridEl) adminsGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los admins.</p>';
                });

            // Cargar Recursos
            fetch('recursos.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar recursos.json');
                    return response.json();
                })
                .then(recursosData => {
                    renderizarRecursos(recursosData, recursosGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar recursos:', error);
                    if (recursosGridEl) recursosGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los recursos.</p>';
                });
            
            // Cargar Eventos
            fetch('eventos.json')
                .then(response => {
                    if (!response.ok) throw new Error('No se pudo cargar eventos.json');
                    return response.json();
                })
                .then(eventosData => {
                    renderizarEventos(eventosData, eventosGridEl);
                })
                .catch(error => {
                    console.error('Error al cargar eventos:', error);
                    if (eventosGridEl) eventosGridEl.innerHTML = '<p class="text-red-400 col-span-full text-center">Error al cargar los eventos.</p>';
                });
            
            // --- Funciones de Renderizado ---

            function renderizarGrupos(gruposData, container) {
                if (!container) return;
                const grupoTemplate = document.getElementById('grupo-card-template');
                container.innerHTML = ''; 

                gruposData.forEach(grupo => {
                    const card = grupoTemplate.content.cloneNode(true);
                    card.querySelector('.grupo-card-link').href = grupo.link;
                    const imgEl = card.querySelector('.grupo-imagen');
                    imgEl.src = grupo.imagen || 'img/default_group.png';
                    imgEl.alt = `Logo de ${grupo.titulo}`;
                    card.querySelector('.grupo-titulo').textContent = grupo.titulo;
                    card.querySelector('.grupo-descripcion').textContent = grupo.descripcion;
                    container.appendChild(card);
                });
            }
            
            function renderizarAdmins(adminsData, container) {
                if (!container) return;
                const adminTemplate = document.getElementById('admin-card-template');
                container.innerHTML = '';
                
                adminsData.forEach(admin => {
                    const card = adminTemplate.content.cloneNode(true);
                    const fotoSrc = admin.foto || 'img/default_profile.png';
                    const bannerSrc = admin.banner || fotoSrc; 
                    card.querySelector('.admin-banner').style.backgroundImage = `url('${bannerSrc}')`;
                    const fotoEl = card.querySelector('.admin-foto');
                    fotoEl.src = fotoSrc;
                    fotoEl.alt = `Foto de ${admin.nombre}`;
                    card.querySelector('.admin-nombre').textContent = admin.nombre;
                    card.querySelector('.admin-desc').textContent = admin.descripcion;
                    
                    const gruposContainer = card.querySelector('.admin-grupos');
                    admin.grupos.forEach(nombreGrupo => {
                        const tag = document.createElement('span');
                        tag.className = "px-2 py-0.5 bg-neutral-800 text-blue-300 text-xs font-medium rounded-full";
                        tag.textContent = nombreGrupo;
                        gruposContainer.appendChild(tag);
                    });
                    
                    const linksContainer = card.querySelector('.admin-links');
                    admin.links.forEach(link => {
                        const a = document.createElement('a');
                        a.href = link.url;
                        a.target = "_blank";
                        a.rel = "noopener noreferrer";
                        a.className = "text-gray-400 hover:text-white transition-colors";
                        let iconClass = '';
                        if (link.tipo === 'github') iconClass = 'fa-brands fa-github';
                        else if (link.tipo === 'linkedin') iconClass = 'fa-brands fa-linkedin';
                        else iconClass = 'fa-solid fa-link';
                        a.innerHTML = `<i class="${iconClass} text-2xl"></i>`;
                        linksContainer.appendChild(a);
                    });
                    
                    container.appendChild(card);
                });
            }

            function renderizarRecursos(recursosData, container) {
                if (!container) return;
                const recursoTemplate = document.getElementById('recurso-card-template');
                container.innerHTML = '';

                recursosData.forEach(recurso => {
                    const card = recursoTemplate.content.cloneNode(true);
                    card.querySelector('.recurso-card-link').href = recurso.link;
                    card.querySelector('.recurso-titulo').textContent = recurso.titulo;
                    card.querySelector('.recurso-descripcion').textContent = recurso.descripcion;
                    container.appendChild(card);
                });
            }

            function renderizarEventos(eventosData, container) {
                if (!container) return;
                const eventoTemplate = document.getElementById('evento-card-template');
                container.innerHTML = '';

                const formatter = new Intl.DateTimeFormat('es-ES', {
                    dateStyle: 'long',
                    timeStyle: 'short',
                    timeZone: 'UTC' // Ajusta esto si tus fechas no son UTC
                });

                eventosData.forEach(evento => {
                    const card = eventoTemplate.content.cloneNode(true);
                    
                    card.querySelector('.evento-card-link').href = evento.link;
                    const imgEl = card.querySelector('.evento-imagen');
                    imgEl.src = evento.imagen || 'https://placehold.co/600x600/141414/FFFFFF?text=Evento';
                    imgEl.alt = `Banner de ${evento.titulo}`;
                    
                    // Formatear fecha
                    try {
                        const fecha = new Date(evento.fecha_inicio);
                        card.querySelector('.evento-fecha').textContent = formatter.format(fecha);
                    } catch (e) {
                        console.warn('Fecha inválida para el evento:', evento.titulo);
                        card.querySelector('.evento-fecha').textContent = "Fecha por confirmar";
                    }
                    
                    card.querySelector('.evento-titulo').textContent = evento.titulo;
                    card.querySelector('.evento-descripcion').textContent = evento.descripcion;
                    
                    container.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>
